{% extends 'base.html' %}

{% block content %}
  <h2>{{ project.name }}</h2>
  <p>{{ project.description }}</p>
  <p>Deadline : {{ project.deadline }}</p>
  <p>Crée le {{ project.created_at|date:'d/m/Y H:i:s' }}</p>
  <p>Dernière modification le {{ project.updated_at|date:'d/m/Y H:i:s' }}</p>
  <h3>Tâches</h3>
  <p><a href="{% url 'task_create' project.pk %}">Créer une tache</a></p>
  <table>
    <thead>
    <tr>
      <th>Nom</th>
      <th>Description</th>
      <th>Deadline</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
      {% for task in project.task_set.all %}
        <tr>
          <td>{{ task.name }}</td>
          <td>{{ task.description }}</td>
          <td>{{ task.deadline }}</td>
          <td>
            <a href="{% url 'task_detail' project.pk task.pk %}">Voir</a>
            {% if project.manager == user %}
              | <a href="{% url 'task_update' project.pk task.pk %}">Modifier</a>
              | <a href="{% url 'task_delete' project.pk task.pk %}">Supprimer</a>
            {% endif %}
          </td>
        </tr>
    {% empty %}
      <tr><td colspan="4">Aucune tâche pour ce projet.</td></tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock %}