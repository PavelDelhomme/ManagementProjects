{% extends "base.html" %}
{% load static %}

{% block title %}Calendrier{% endblock %}

{% block content %}
<style>
    .event {
        padding: 0.5rem;
        margin-bottom: 0.5rem;
        border-radius: 0.25rem;
        cursor: pointer;
    }

    .event input[type="checkbox"] {
        margin-top: 0;
        margin-right: 0.5rem;
    }

    .event:hover {
        background-color: #e1e1e1;
    }

    .container-fluid {
        height: 70vh;
        width: 75vw;
    }

</style>
<div class="container-fluid centered"> <!-- Conteneur principal -->
    <div id="calendar"></div> <!-- Calendrier -->
</div>

<script>
    var calendar = new FullCalendar.Calendar(calendarEl, { // Crée une instance de FullCalendar
        initialView: 'dayGridMonth', // Affiche le calendrier en mode mois
        events: '{% url "event_api" %}', // Récupère les événements depuis l'API
        url = "{% url 'task_api' %}";
        eventDidMount: function (info) {
            var tooltip = new Tooltip(info.el, {
                title: info.event.extendedProps.description,
                placement: 'top',
                trigger: 'hover',
                container: 'body'
            });
        }
    });
    initializeView: 'dayGridWeek', // Affiche le calendrier en mode mois
        events
    :
    '{% url "event_api" %}', // Récupère les événements depuis l'API
        url = "{% url 'task_api' %}";
    eventDidMount: function f(info) {
        var tooltip = new Tooltip(info.el, {
            title: info.event.extendedProps.description,
            placement: 'top',
            trigger: 'hover',
            container: 'body'
        });
    }

    /*document.addEventListener('DOMContentLoaded', function () { // wait until the DOM
        // page is now ready, initialize the calendar...
        var calendarEl = document.getElementById('calendar'); // Récupère l'élément HTML qui contiendra le calendrier
        var calendar = new FullCalendar.Calendar(calendarEl, { // Crée une instance de FullCalendar
            initialView: 'dayGridMonth', // Affiche le calendrier en mode mois
            events: '{% url "event_api" %}', // Récupère les événements depuis l'API
        });
        calendar.render(); // Affiche le calendrier
    });*/
</script>
<!-- JavaScript -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.js'></script>

{% endblock %}
